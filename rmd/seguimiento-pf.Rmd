---
title: "Seguimiento PF"
author: "Arthur Benitez"
date: "26/9/2019"
output: powerpoint_presentation
params:
  negocios: "'BODEGA','BAE'"
  old_nbrs: 4007408, 4225344
  wk_ini_stud: 11930
  wk_fin_stud: 11935
  wk_ini_vtas: 11926
  wk_fin_vtas: 11929
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r}
library(tidyverse)
# Correr los queries
prepare_queries <- function(query, params) {
  query %>% 
    str_replace_all('\\?NEGOCIOS', params$negocios) %>%
    str_replace_all('\\?OLD_NBRS', params$old_nbrs) %>%
    str_replace_all('\\?WK_INI_STUD', as.character(params$wk_ini_stud)) %>%
    str_replace_all('\\?WK_FIN_STUD', as.character(params$wk_fin_stud)) %>%
    str_replace_all('\\?WK_INI_VTAS', as.character(params$wk_ini_vtas)) %>%
    str_replace_all('\\?WK_FIN_VTAS', as.character(params$wk_fin_vtas)) %>%
    str_subset('^\\s*--', negate = TRUE) %>%  #quitar lineas de comentarios
    stringi::stri_trans_general('ASCII') %>% # quitar no ASCII porque truena en producci√≥n
    paste(collapse = '\n')
}

queries <- list(
  ddv = readLines('../sql/item-business-week-ddv.sql'),
  is = readLines('../sql/item-business-week-is.sql'),
  sales = readLines('../sql/item-business-week-sales.sql')
  ) %>%
  map(function(x){prepare_queries(x, params)}) %>% 
  map(cat)
```

## R Markdown

This is an R Markdown presentation. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document.

## Slide with Bullets

- Bullet 1
- Bullet 2
- Bullet 3

## Slide with R Output

```{r cars, echo = TRUE}
summary(cars)
```

## Slide with Plot

```{r pressure}
plot(pressure)
```

